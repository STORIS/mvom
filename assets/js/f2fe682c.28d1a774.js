"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[145],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,h=u["".concat(s,".").concat(m)]||u[m]||p[m]||o;return a?n.createElement(h,l(l({ref:t},d),{},{components:a})):n.createElement(h,l({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},6849:function(e,t,a){a.r(t),a.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return p}});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),l=["components"],i={id:"model_schemaless",title:"Schemaless Models"},s="Schemaless Models",c={unversionedId:"Model/Advanced Topics/model_schemaless",id:"Model/Advanced Topics/model_schemaless",title:"Schemaless Models",description:"On occasion, MultiValue records will be used in a manner that does not lend itself to defining a schema. The flexibility of the MultiValue data structure allows records to take amorphous shapes. For instance, a MultiValue record might be a dynamically sized list of strings with each attribute containing one item from the list. It is not possible to define a Schema for these types of records, but consumers of MVOM might still wish to work with records of that nature. Schemaless models allow for that functionality. To create a Model that does not have a schema, you should provide null for the schema parameter in the call to connection.model.",source:"@site/docs/04 - Model/07 - Advanced Topics/03 - Schemaless Models.md",sourceDirName:"04 - Model/07 - Advanced Topics",slug:"/Model/Advanced Topics/model_schemaless",permalink:"/mvom/docs/Model/Advanced Topics/model_schemaless",draft:!1,editUrl:"https://github.com/STORIS/mvom/tree/main/website/docs/04 - Model/07 - Advanced Topics/03 - Schemaless Models.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"model_schemaless",title:"Schemaless Models"},sidebar:"docsSidebar",previous:{title:"Projection",permalink:"/mvom/docs/Model/Advanced Topics/model_projection"},next:{title:"Reading Encoded Data",permalink:"/mvom/docs/Model/Advanced Topics/model_reading_encoded"}},d={},p=[{value:"The _raw Property",id:"the-_raw-property",level:2},{value:"Example",id:"example",level:2}],u={toc:p};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"schemaless-models"},"Schemaless Models"),(0,o.kt)("p",null,"On occasion, MultiValue records will be used in a manner that does not lend itself to defining a schema. The flexibility of the MultiValue data structure allows records to take amorphous shapes. For instance, a MultiValue record might be a dynamically sized list of strings with each attribute containing one item from the list. It is not possible to define a Schema for these types of records, but consumers of MVOM might still wish to work with records of that nature. Schemaless models allow for that functionality. To create a ",(0,o.kt)("inlineCode",{parentName:"p"},"Model")," that does not have a schema, you should provide ",(0,o.kt)("inlineCode",{parentName:"p"},"null")," for the schema parameter in the call to ",(0,o.kt)("inlineCode",{parentName:"p"},"connection.model"),"."),(0,o.kt)("p",null,"A ",(0,o.kt)("inlineCode",{parentName:"p"},"Model")," instance that was created with a schema will have properties that match the schema. That is, the shape of the ",(0,o.kt)("inlineCode",{parentName:"p"},"Model")," object will align with that of the schema. However, schemaless models cannot work that way since they do not have schemas. Instead, a ",(0,o.kt)("inlineCode",{parentName:"p"},"Model")," that is created without a ",(0,o.kt)("inlineCode",{parentName:"p"},"Schema")," will instead have a property ",(0,o.kt)("inlineCode",{parentName:"p"},"_raw")," on it."),(0,o.kt)("h2",{id:"the-_raw-property"},"The ","_","raw Property"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"_raw")," property is fairly simple. After reading a record using a schemaless model, the ",(0,o.kt)("inlineCode",{parentName:"p"},"_raw")," property will be populated with an array that matches the MultiValue data structure. Attributes will be converted to values of the array. If attributes contain values or the values contain subvalues, then the array will be multidimensional."),(0,o.kt)("p",null,"Consumers can work with the ",(0,o.kt)("inlineCode",{parentName:"p"},"_raw")," property of the ",(0,o.kt)("inlineCode",{parentName:"p"},"Model")," instance as they would any other array. Upon saving, the ",(0,o.kt)("inlineCode",{parentName:"p"},"_raw")," property will be turned back into a MultiValue record by converting the array into attributes, values, and subvalues."),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("p",null,"Suppose you had a database record structured as follows:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,o.kt)("th",{parentName:"tr",align:null},"Value"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"ID"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"0001"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"1"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"foo"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"2"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"bar"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"3"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"baz"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"4"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"qux{vm}quux"))))),(0,o.kt)("p",null,"You could create and read using a schemaless ",(0,o.kt)("inlineCode",{parentName:"p"},"Model")," as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const Schemaless = connection.model(null, 'SOME_FILE');\n\nconst schemaless = await Schemaless.findById('0001');\nconsole.log(schemaless._raw); // outputs ['foo', 'bar', 'baz', ['qux', 'quux']]\n\nschemaless._raw.push('last in line');\nschemaless.save();\n")))}m.isMDXComponent=!0}}]);