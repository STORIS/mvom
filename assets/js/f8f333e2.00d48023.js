"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1343],{699:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>r});var a=n(4848),s=n(8453);const i={id:"model_basics",title:"Model Basics"},o="Model Basics",d={id:"Model/model_basics",title:"Model Basics",description:"A Model is a special constructor which is derived from a Connection and a Schema instance. Model constructors are dynamically generated from the connection and schema and are the interface point to the MultiValue database. All of the logic for interacting with data therefore comes from a Model class.",source:"@site/docs/04 - Model/01 - Basics.md",sourceDirName:"04 - Model",slug:"/Model/model_basics",permalink:"/mvom/docs/Model/model_basics",draft:!1,unlisted:!1,editUrl:"https://github.com/STORIS/mvom/tree/main/website/docs/04 - Model/01 - Basics.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"model_basics",title:"Model Basics"},sidebar:"docsSidebar",previous:{title:"Encryption",permalink:"/mvom/docs/Schema/schema_encryption"},next:{title:"Creating a Model",permalink:"/mvom/docs/Model/model_creation"}},c={},r=[{value:"Creating a Model Constructor",id:"creating-a-model-constructor",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Example",id:"example",level:3},{value:"Model instances",id:"model-instances",level:2},{value:"The _id Property",id:"the-_id-property",level:3},{value:"Reading from the database",id:"reading-from-the-database",level:4},{value:"Writing to the database",id:"writing-to-the-database",level:4}];function l(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"model-basics",children:"Model Basics"}),"\n",(0,a.jsxs)(t.p,{children:["A ",(0,a.jsx)(t.code,{children:"Model"})," is a special constructor which is derived from a ",(0,a.jsx)(t.code,{children:"Connection"})," and a ",(0,a.jsx)(t.code,{children:"Schema"})," instance. Model constructors are dynamically generated from the connection and schema and are the interface point to the MultiValue database. All of the logic for interacting with data therefore comes from a Model class."]}),"\n",(0,a.jsx)(t.h2,{id:"creating-a-model-constructor",children:"Creating a Model Constructor"}),"\n",(0,a.jsxs)(t.p,{children:["Each ",(0,a.jsx)(t.code,{children:"Model"})," constructor is unique. That is, there is no ",(0,a.jsx)(t.code,{children:"Model"})," constructor exported from MVOM. It is instead created at runtime by a consumer once a connection has been established and a schema defined."]}),"\n",(0,a.jsxs)(t.p,{children:["A ",(0,a.jsx)(t.code,{children:"Model"})," first requires a ",(0,a.jsx)(t.a,{href:"../Schema/schema_basics",children:"schema"})," instance as well as an ",(0,a.jsx)(t.a,{href:"../connection#opening-a-connection",children:"open database connection"}),". Once those prerequisites have been met, a ",(0,a.jsx)(t.code,{children:"Model"})," can be created using the ",(0,a.jsx)(t.code,{children:"model"})," method of the ",(0,a.jsx)(t.code,{children:"Connection"})," instance."]}),"\n",(0,a.jsx)(t.h3,{id:"syntax",children:"Syntax"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:"model(schema: Schema | null, file: string): ModelConstructor\n"})}),"\n",(0,a.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Parameter"}),(0,a.jsx)(t.th,{children:"Type"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"schema"})}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.code,{children:"Schema"})," | ",(0,a.jsx)(t.code,{children:"null"})]}),(0,a.jsxs)(t.td,{children:["The instance of the ",(0,a.jsx)(t.code,{children:"Schema"})," class to associate with the model or ",(0,a.jsx)(t.code,{children:"null"})," for schemaless models"]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"file"})}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"string"})}),(0,a.jsx)(t.td,{children:"The name of the file in the MultiValue database"})]})]})]}),"\n",(0,a.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:"const Item = connection.createModel(itemSchema, 'ITEM');\n"})}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsxs)(t.p,{children:["By convention, a ",(0,a.jsx)(t.code,{children:"Model"})," has a capitalized first letter. This is because a ",(0,a.jsx)(t.code,{children:"Model"})," is a class constructor and by convention class constructors in many programming languages are capitalized. This is not enforced but strongly recommended."]})}),"\n",(0,a.jsx)(t.h2,{id:"model-instances",children:"Model instances"}),"\n",(0,a.jsx)(t.p,{children:"An instance of a Model is a representation of data as defined by a Schema. That is, the properties of a Model are those which are described by the Schema. Records read from a MultiValue database will be transformed into a Model instance using the Schema. When saving to the database, a Model instance will be transformed into MultiValue delimited record format. Essentially, a Model instance is an object with a shape matching the schema which acts as an abstraction over the MultiValue data structure."}),"\n",(0,a.jsx)(t.h3,{id:"the-_id-property",children:"The _id Property"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"_id"})," property is a special property that exists on all ",(0,a.jsx)(t.code,{children:"Model"})," instances. The ",(0,a.jsx)(t.code,{children:"_id"})," property of a model instance contains the database record ID that is associated with the ",(0,a.jsx)(t.code,{children:"Model"})," instance. Once the ",(0,a.jsx)(t.code,{children:"_id"})," property has been set on a ",(0,a.jsx)(t.code,{children:"Model"})," instance, it will be immutable (read only) thereafter. This property is accessible to all ",(0,a.jsx)(t.code,{children:"Model"})," consumers for read access purposes to determine the record ID."]}),"\n",(0,a.jsx)(t.h4,{id:"reading-from-the-database",children:"Reading from the database"}),"\n",(0,a.jsxs)(t.p,{children:["When reading data from the database, the ",(0,a.jsx)(t.code,{children:"_id"})," property is automatically populated with the database record ID."]}),"\n",(0,a.jsx)(t.h4,{id:"writing-to-the-database",children:"Writing to the database"}),"\n",(0,a.jsxs)(t.p,{children:["Models can be instantiated without an ",(0,a.jsx)(t.code,{children:"_id"})," property. However, the ",(0,a.jsx)(t.code,{children:"_id"})," property ",(0,a.jsx)(t.em,{children:"must"})," be set prior to saving a Model or an error will be thrown. When saving, it will be the record ID used."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>d});var a=n(6540);const s={},i=a.createContext(s);function o(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);